<!DOCTYPE html>
<html>
<head>
<title>Cheese Please!</title>

<script>
var canvas;
var maxWidth = 1000; //check to make sure all canvas values are compatible
var maxHeight = 1000;
var fps = 15;
var ctx;
var titleImage;
var count;
var mouseSpriteWidth = 20;
var level = 1;
var maxLevel = 9;
var x = 130; // x and y associate with the mouse
var y = 66;
var xWidth = 20;
var yWidth = 20;
var collision = 0;
var cheese = 0;
var cheeseX = 0;
var cheeseY = 0;
var cheeseWidth = 20;
var cheeseHeight = 20;
var berry = true;
var berry2 = true;
var berryX = 0;
var berryY = 0;
var berryWidth = 15;
var berryHeight = 15;
var berryX2 = 0;
var berryY2 = 0;
var score = 0;
var mouseStartX;
var mouseStartY;

function mainMenu()
	{
	canvas = document.getElementById("canvas");
	ctx = canvas.getContext('2d');
	titleImage = new Image();
	titleImage.src = 'mouseincheeseholes.png';
	mouseSprite = new Image();
	mouseSprite.src = 'mouseSpritesFinal2.png';
	
	loadLevels()
	
	titleImage.onload = function()
		{
		// drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight)
		ctx.drawImage(titleImage, 0, 0, 365, 257, 0, 0, 800, 800);
		document.addEventListener('click', mousePressMenu, false);
		};
	}
	
function mousePressMenu (event)
	{
	ctx.clearRect(0, 0, maxWidth, maxHeight);
	window.open("http://www.youtube.com/watch_popup?v=1vXpsISNQWU&vq=medium")
	document.removeEventListener('click', mousePressMenu, false);
	mainGame ();
	}
	
function loadLevels()
	{
		berryimg = new Image();
		berryimg.src = 'strawberry.gif';
		
		cheese = new Image();
		cheese.src = 'cheese.gif';
		
		levelOne = new Image();
		levelOne.src = 'levelOne.gif';
		
		levelTwo = new Image();
		levelTwo.src = 'levelTwo.gif';
		
		levelThree = new Image();
		levelThree.src = 'levelThree.gif';
		
		levelFour = new Image();
		levelFour.src = 'levelFour.gif';
		
		levelFive = new Image();
		levelFive.src = 'levelFive.gif';
		
		levelSix = new Image();
		levelSix.src = 'levelSix.gif';
		
		levelSeven = new Image();
		levelSeven.src = 'levelSeven.gif';
		
		levelEight = new Image();
		levelEight.src = 'levelEight.gif';
		
		levelNine = new Image();
		levelNine.src = 'levelNine.gif';
	}	

function mainGame ()
	{
		count = 2;
		
		document.addEventListener('keydown', function(e)
		{
			if (e.keyCode == 68 || e.keyCode == 39)
			{
				if (x + 4 < 980)
				{
					x+=4;// right
					
					clear();
					checkCollision();
					cheeseCollision();
					berryCollision();
					
					if (collision == 1)
					{
						x-=4; 
						
					
						collision = 0;
					}
					else if (collision == 0)
						{
							if(count < 6)
							{
								count ++
							}
							else if (count >= 6)
							{
								count = 2
							}
						}
				}
			}
			else if (e.keyCode == 65 || e.keyCode == 37)
			{
				if (x - 4 > 0)
				{
					x-=4;// left
					
					clear();
					checkCollision();
					cheeseCollision();
					berryCollision();
					
					if (collision == 1)
					{
						x+=4; 
	
						collision = 0;
					}
					else if (collision == 0)
					{
						if(count < 10)
						{
							count = 15;
						}
						else if(count > 10)
						{
							count--;
						}
						else if (count == 10)
						{
							count = 15;
						}	
					}
				}
			}
			else if (e.keyCode == 87 || e.keyCode == 38)
			{
				if (y - 4 > -10)
				{
					clear();
					checkCollision();
					cheeseCollision();
					berryCollision();
					
					y-=4; // up
					
					if (collision == 1)
					{
						y+=4;
						
						
						collision = 0;	
					}
					else if (collision == 0)
					{
						if(count > 0)
						{
							count = 0;
						}
						else if(count == 0)
						{
							count = 1;
						}
					}
				}
			}
			else if (e.keyCode == 83 || e.keyCode == 40)
			{
				if (y + 4 < 980)
				{
					y+=4; // down
					
					clear();
					checkCollision();
					cheeseCollision();
					berryCollision();
					
					if (collision == 1)
					{
						y-=4;
											
						collision = 0;
					}
					else if (collision == 0)
					{
						if(count < 8)
						{
							count = 8;
						}
						else if (count > 8)
						{
							count = 8;
						}
						else if(count == 8)
						{
							count = 9;
						}	
					}
				}
			}
			else if (e.keyCode == 80)
			{
				if (level <= 9)
				{
				level +=1;
				berry = true;
				berry2 = true;
				x = mouseStartX;
				y = mouseStartY;
					if (level == 4)
					{
						window.open("http://www.youtube.com/watch_popup?v=uEHfQK8SAXE&vq=medium")
					}
					else if (level == 5)
					{
						window.open("http://www.youtube.com/watch_popup?v=Gx6dCsJbMZw&vq=medium")
					}
					else if (level == 6)
					{
						window.open("http://www.youtube.com/watch_popup?v=Y78EYdFhVsE&vq=medium")
					}
					else if (level == 7)
					{
						window.open("http://www.youtube.com/watch_popup?v=4MgqcVqO-Ww&vq=medium")
					}
					else if (level == 8)
					{
						window.open("http://www.youtube.com/watch_popup?v=S6phllP0yLU&vq=medium")
					}
					else if (level == 9)
					{
						window.open("http://www.youtube.com/watch_popup?v=mkl2mShugLc&vq=medium")
					}
					else if (level == 10)
					{
						window.open("http://www.youtube.com/watch_popup?v=dNwHVSRIIEg&vq=medium")	
					}
				}
			}
		/*	else if (e.keyCode == 79)
			{
				if (level > 1)
				{
				level -=1;
				berry = true;
				berry2 = true;
				x = mouseStartX;
				y = mouseStartY;
				}
			}
			*/
		}, false);
		

		
		setInterval(gameLoop, 1000/fps);
			
	}
	
function gameLoop ()
	{
		ctx.clearRect(0, 0, maxWidth, maxHeight);
			
		switch(level)
		{
		case 1:
			ctx.fillStyle="#663300";
			ctx.fillRect(0, 0, 800, 800);
			ctx.drawImage(levelOne, 0, 0, 1022, 862, 0, 0, 800, 800);
			cheeseX = 25;
			cheeseY = 240;
			mouseStartX = 730;
			mouseStartY = 7;
			berryX = 30;
			berryY = 40;
			berryX2 = 505;
			berryY2 = 400;
			break;
		case 2:
			ctx.fillStyle="#663300";
			ctx.fillRect(0, 0, 800, 800);
			ctx.drawImage(levelTwo, 0, 0, 1022, 702, 0, 0, 800, 800);
			cheeseX = 105;
			cheeseY = 775;
			mouseStartX = 975;
			mouseStartY = 371;
			berryX = 53;
			berryY = 410;
			berryX2 = 580;
			berryY2 = 555;
			break;
		case 3:
			ctx.fillStyle="#663300";
			ctx.fillRect(0, 0, 1000, 900);
			ctx.drawImage(levelThree, 0, 0, 1182, 1022, 0, 0, 1000, 900);
			cheeseX = 408;
			cheeseY = 880;
			mouseStartX = 748;
			mouseStartY = 5;
			berryX = 82;
			berryY = 148;
			berryX2 = 896;
			berryY2 = 824;
			break;
		case 4:
			ctx.fillStyle="#3399CC";
			ctx.fillRect(0, 0, 800, 800);
			ctx.drawImage(levelFour, 0, 0, 862, 1022, 0, 0, 800, 800);
			cheeseX = 214;
			cheeseY = 780; 
			mouseStartX = 663;
			mouseStartY = 2;
			berryX = 213;
			berryY = 300;
			berryX2 = 720;
			berryY2 = 102;
			break;
		case 5:
			ctx.fillStyle="#3399CC";
			ctx.fillRect(0, 0, 800, 800);
			ctx.drawImage(levelFive, 0, 0, 702, 1022, 0, 0, 800, 800);
			cheeseX = 5;
			cheeseY = 380;
			mouseStartX = 770;
			mouseStartY = 690;
			berryX = 482;
			berryY = 233;
			berryX2 = 373;
			berryY2 = 635;
			break;
			
		case 6:
			ctx.fillStyle="#3399CC";
			ctx.fillRect(0, 0, 800, 800);
			ctx.drawImage(levelSix, 0, 0, 862, 862, 0, 0, 800, 800);
			cheeseX = 94;
			cheeseY = 5;
			mouseStartX = 255;
			mouseStartY = 5;
			berryX = 480;
			berryY = 380;
			berryX2 = 90;
			berryY2 = 185;
			break;
			
		case 7:
			ctx.fillStyle="#3399CC";
			ctx.fillRect(0, 0, 1000, 600);
			ctx.drawImage(levelSeven, 0, 0, 1022, 542, 0, 0, 1000, 600);
			cheeseX = 965;
			cheeseY = 150;
			mouseStartX = 776;
			mouseStartY = 25;
			berryX = 485;
			berryY = 185;
			berryX2 = 35;
			berryY2 = 220;
			break;
			
		case 8:
			ctx.fillStyle="#3399CC";
			ctx.fillRect(0, 0, 800, 1000);
			ctx.drawImage(levelEight, 0, 0, 1182, 1552, 0, 0, 800, 1000);
			cheeseX = 678;
			cheeseY = 5;
			mouseStartX = 780;
			mouseStartY = 970;
			berryX = 278;
			berryY = 410;
			berryX2 = 380;
			berryY2 = 720;
			break;
			
		case 9:
			ctx.fillStyle="#3399CC";
			ctx.fillRect(0, 0, 1000, 1000);
			ctx.drawImage(levelNine, 0, 0, 1478, 1552, 0, 0, 1000, 1000);
			cheeseX = 380;
			cheeseY = 5;
			berryX = 405;
			berryY = 555;
			berryX2 = 105;
			berryY2 = 388;
			break;
		case 10:
			ctx.fillStyle="#3399CC";
			ctx.fillRect(0, 0, 1000, 1000);
			ctx.fillStyle = '#f00';
			ctx.font = 'italic bold 30px sans-serif';
			ctx.fillText('You beat the game with a score of ' + score + '. Congratulations!', 110, 500);
			break;
			
		}
		
		if (level < 10)
		{
			ctx.drawImage(cheese, 0, 0, 472, 334, cheeseX, cheeseY, cheeseWidth, cheeseHeight);		
			
			if (berry == true)
			{
			ctx.drawImage(berryimg, 0, 0, 313, 336, berryX, berryY, berryWidth, berryHeight);
			}
			if (berry2 == true)
			{
			ctx.drawImage(berryimg, 0, 0, 313, 336, berryX2, berryY2, berryWidth, berryHeight);
			}
			
			ctx.drawImage(mouseSprite, (count * mouseSpriteWidth), 0, 18, 27, x, y, xWidth, yWidth);
		}
		
	}


	
	
	
function clear() // to check for collision of maze only
	{
		ctx.clearRect(0, 0, maxWidth, maxHeight);
		switch(level)
			{
				case 1:
					ctx.drawImage(levelOne, 0, 0, 1022, 862, 0, 0, 800, 800);
					break;
				case 2:
					ctx.drawImage(levelTwo, 0, 0, 1022, 702, 0, 0, 800, 800);
					break;
				case 3:	
					ctx.drawImage(levelThree, 0, 0, 1182, 1022, 0, 0, 1000, 900);
					break;
				case 4:
					ctx.drawImage(levelFour, 0, 0, 862, 1022, 0, 0, 800, 800);
					break;
				case 5:
					ctx.drawImage(levelFive, 0, 0, 702, 1022, 0, 0, 800, 800);
					break;	
				case 6:
					ctx.drawImage(levelSix, 0, 0, 862, 862, 0, 0, 800, 800);
					break;	
				case 7:
					ctx.drawImage(levelSeven, 0, 0, 1022, 542, 0, 0, 1000, 600);
					break;		
				case 8:
					ctx.drawImage(levelEight, 0, 0, 1182, 1552, 0, 0, 800, 1000);
					break;	
				case 9:
					ctx.drawImage(levelNine, 0, 0, 1478, 1552, 0, 0, 1000, 1000);
					break;
			}
	}

function checkCollision()
	{
	
	var imgd = ctx.getImageData(x + 4, y + 4, 14, 14);
	var pix = imgd.data;
		
		switch(level)
		{
		case 1:
			ctx.fillStyle="#663300";
			ctx.fillRect(0, 0, 800, 800);
			ctx.drawImage(levelOne, 0, 0, 1022, 862, 0, 0, 800, 800);
			break;
		case 2:
			ctx.fillStyle="#663300";
			ctx.fillRect(0, 0, 800, 800);
			ctx.drawImage(levelTwo, 0, 0, 1022, 702, 0, 0, 800, 800);
			break;
		case 3:
			ctx.fillStyle="#663300";
			ctx.fillRect(0, 0, 1000, 900);
			ctx.drawImage(levelThree, 0, 0, 1182, 1022, 0, 0, 1000, 900);
			break;
		case 4:
			ctx.fillStyle="#3399CC";
			ctx.fillRect(0, 0, 800, 800);
			ctx.drawImage(levelFour, 0, 0, 862, 1022, 0, 0, 800, 800);
			break;
		case 5:
			ctx.fillStyle="#3399CC";
			ctx.fillRect(0, 0, 800, 800);
			ctx.drawImage(levelFive, 0, 0, 702, 1022, 0, 0, 800, 800);
			break;	
		case 6:
			ctx.fillStyle="#3399CC";
			ctx.fillRect(0, 0, 800, 800);
			ctx.drawImage(levelSix, 0, 0, 862, 862, 0, 0, 800, 800);
			break;	
		case 7:
			ctx.fillStyle="#3399CC";
			ctx.fillRect(0, 0, 1000, 600);
			ctx.drawImage(levelSeven, 0, 0, 1022, 542, 0, 0, 1000, 600);
			break;
		case 8:
			ctx.fillStyle="#3399CC";
			ctx.fillRect(0, 0, 800, 1000);
			ctx.drawImage(levelEight, 0, 0, 1182, 1552, 0, 0, 800, 1000);
			break;
		case 9:
			ctx.fillStyle="#3399CC";
			ctx.fillRect(0, 0, 1000, 1000);
			ctx.drawImage(levelNine, 0, 0, 1478, 1552, 0, 0, 1000, 1000);
			break;
		case 10:
			ctx.fillStyle="#3399CC";
			ctx.fillRect(0, 0, 1000, 1000);
			ctx.fillStyle = '#f00';
			ctx.font = 'italic bold 30px sans-serif';
			ctx.fillText('You beat the game with a score of ' + score + '. Congratulations!', 125, 500);
			break;
		}
		
	if (level < 10)
	{
		if (berry == true)
			{
			ctx.drawImage(berryimg, 0, 0, 313, 336, berryX, berryY, berryWidth, berryHeight);
			}
		if (berry2 == true)
			{
			ctx.drawImage(berryimg, 0, 0, 313, 336, berryX2, berryY2, berryWidth, berryHeight);
			}
	
		ctx.drawImage(cheese, 0, 0, 472, 334, cheeseX, cheeseY, cheeseWidth, cheeseHeight);
		ctx.drawImage(mouseSprite, (count * mouseSpriteWidth), 0, 18, 27, x, y, xWidth, yWidth);
	}
	
	for (var i = 0; n = pix.length, i < n; i += 4)
		{
			if (pix[i] != 0)
			{
				collision = 1;
			}			
		}	
	}

function cheeseCollision()
	{
	
	if (x >= cheeseX && x <= cheeseX + cheeseWidth && y >= cheeseY && y <= cheeseY + cheeseHeight)
		{
			if (level <= 9)
			{
			level+=1;
			berry = true;
			berry2 = true;
			x = mouseStartX;
			y = mouseStartY;
				if (level == 4)
				{
					window.open("http://www.youtube.com/watch_popup?v=uEHfQK8SAXE&vq=medium")
				}
				else if (level == 5)
				{
					window.open("http://www.youtube.com/watch_popup?v=Gx6dCsJbMZw&vq=medium")
				}
				else if (level == 6)
				{
					window.open("http://www.youtube.com/watch_popup?v=Y78EYdFhVsE&vq=medium")
				}
				else if (level == 7)
				{
					window.open("http://www.youtube.com/watch_popup?v=4MgqcVqO-Ww&vq=medium")
				}
				else if (level == 8)
				{
					window.open("http://www.youtube.com/watch_popup?v=S6phllP0yLU&vq=medium")
				}
				else if (level == 9)
				{
					window.open("http://www.youtube.com/watch_popup?v=mkl2mShugLc&vq=medium")
				}
				else if (level == 10)
				{
					window.open("http://www.youtube.com/watch_popup?v=dNwHVSRIIEg&vq=medium")	
				}
			
			}
		}	
	}

function berryCollision()
	{
		
		if (berry == true)
		{
			if (x >= berryX && x <= berryX + berryWidth && y >= berryY && y <= berryY + berryHeight)
				{
					score+=200;
					berry = false;
				}
		}
		if (berry2 == true)
		{
			if (x >= berryX2 && x <= berryX2 + berryWidth && y >= berryY2 && y <= berryY2 + berryHeight)
				{
					score+=200;
					berry2 = false;
				}
		}
	}

	
</script>
</head>

<body onload="mainMenu()">
	<canvas id="canvas" width="1000" height="1000"></canvas>
</body>
</html>