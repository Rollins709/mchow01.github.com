function login(){if(!localStorage["handle"]){h=document.getElementById("handle").value;localStorage["handle"]=h}try{document.getElementById("panel").innerHTML="<p>"+localStorage["handle"]+' > <input type="text" id="msg" onchange="store()" maxlength="160" /></p>'}catch(a){}reload()}function store(){msg=document.getElementById("msg").value;postData={"post[username]":localStorage["handle"],"post[content]":msg};$.post("http://lecturer.heroku.com/posts",postData);reload()}function reload(){$.getJSON("http://lecturer.heroku.com/posts.json",function(a){for(i=counter;i<a.length;i++){$("div#log").append('<p><span class="username">'+HtmlEncode(a[i].username)+'</span> <span class="datetime">'+a[i].created_at+'</span>: <span class="msg">'+HtmlEncode(a[i].content)+"</span></p>")}counter=a.length})}function init(){setInterval(reload,1e3);if(localStorage["handle"]){login()}}function HtmlEncode(a){var b=document.createElement("div");b.innerText=b.textContent=a;a=b.innerHTML;delete b;return a}var counter=0